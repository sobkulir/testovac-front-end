{% extends "submit/base.html" %}

{% load submit_parts %}
{% load i18n %}
{% load staticfiles %}

{% block title %}{% trans 'Submit' %} {{ submit.id }}{% endblock title %}

{% block stylesheets %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'submit/google-code-prettify/prettify.css' %}" type="text/css" />
{% endblock %}

{% block js %}
    {{ block.super }}
    <script src="{% static 'submit/google-code-prettify/prettify.js' %}" type="text/javascript"></script>
    <script>
        !function ($) {
            $(function(){
            window.prettyPrint && prettyPrint()
            })
        }(window.jQuery)
    </script>
{% endblock %}

{% block page_header %}
    <ul class="nav nav-pills">
        <li class="pull-left">
            <h1>
                {% trans 'Example solution' %} 
                {% if submit.reference_name %}
                    ({{ submit.reference_name }})
                {% endif %}
            </h1>
        </li>
        <li class="pull-right">
            <div class="btn-group" role="group">
                    <a class="btn btn-primary btn-nav" href="{% url 'task_statement' task_id %}">
                        <span class="glyphicon" aria-hidden="true"></span> {% trans 'Back to task' %}
                    </a>
                </div>
            </li>
     </ul>

    {% if user_has_admin_privileges %}
        <a href="{% url 'admin:submit_submit_change' submit.id %}">
            <span class="glyphicon glyphicon-pencil"></span> {% trans 'Edit and review' %}
        </a>
        {% if submit.receiver.configuration.send_to_judge %}
            <a href="{% url 'rejudge_submit' submit.id %}">
                <span class="glyphicon glyphicon-send"></span> {% trans 'Rejudge submit' %}
            </a>
        {% endif %}
    {% endif %}
{% endblock %}

{% block page_content %}
    <div class="row">
        <div class="col col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">{% trans 'Submit' %}</div>
                <div class="panel-body">
                <table class="table-condensed">
                    <tr>
                        <th>ID:</th>
                        <td>{{ submit.id }}</td>
                    </tr>
                    <tr>
                        <th>{% trans 'User' %}:</th>
                        <td>{{ submit.user }}</td>
                    </tr>
                    {% if submit.file_exists %}
                        <tr>
                            <th>{% trans 'Submitted file' %}:</th>
                            <td>{{ submit.filename }}</td>
                        </tr>
                    {% endif %}
                    {% if review %}
                        <tr>
                            <th>{% trans 'Result' %}:</th>
                            <td>{{ review.verbose_response }}</td>
                        </tr>
                        <tr>
                            <th>{% trans 'Score' %}:</th>
                            <td>{{ review.display_score }}</td>
                        </tr>
                    {% endif %}
                </table>
                </div>
            </div>
        </div>
        <div class="col col-md-6">
            <div class="panel panel-default">
                <div class="panel-body">
                    {% if review %}
                        {% if image %}
                            <img style="width: 100%" src="{{ image }}">
                        {% endif %}
                    {% else %}
                        <p>{% trans 'Not reviewed yet.' %}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    {% if show_submitted_file %}
        <pre class="prettyprint">{{ submitted_file }}</pre>
    {% endif %}

    {% public_submit_list submit.receiver submit.id %}

    {% if review and protocol_expected %}
        <h3>{% trans 'Protocol' %}</h3>
        {% include 'submit/protocol.html' %}
    {% endif %}

{% endblock page_content %}
